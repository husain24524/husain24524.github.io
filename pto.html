<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="style.css">
  <script type="text/javascript" src="script.js"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Al Jamea tus Saifiyah - PTO Demo - Home</title>
  <link rel="icon" type="image/jpg" href="/images/favicon2.PNG">
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
   <!-- jQuery, Popper, and Bootstrap JS -->
   <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
   <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-T70V9YT0E2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-T70V9YT0E2');
  </script>   

</head>


<body onload="modalDelay()">

 <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand" href=".">AJSN Awwala Orientation</a>
    <button
      class="navbar-toggler"
      type="button"
      data-toggle="collapse"
      data-target="#navbarNav"
      aria-controls="navbarNav"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="index.html">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" style="color: red;" href="./pto.html" onstouchstart='document.cookie="its=tr; expires=Thu, 01 Jan 1970 00:00:01 GMT";' onclick='document.cookie="its=tr; expires=Thu, 01 Jan 1970 00:00:01 GMT";'>Logout</a>
        </li>
      </ul>
    </div>
  </nav>



<!-- Modal for new Info -->
<button id="myModalBtn" type="button" class="btn btn-primary hidden" data-toggle="modal" data-target="#myModal"></button>
<div class="modal fade" id="myModal" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Login with your Child's ITS</h4>
      </div>
      <div class="modal-body">

      </div>

      <center><div id="trsubmit">
        Enter your Child's ITS Number <br><br><input id="its" type="number" ><br><br>
      <button id="submittr" type="button" class="btn btn-info" onclick="trr()" >Submit</button><br><br><br>
      <!-- TODO: Alternative to TRR function -->
      </div></center>

      <div class="modal-footer">
        <button type="button" class="btn btn-warning" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="container mt-4" style="font-family: Kanz-al-Marjaan;">
  <table class="table table-striped table-bordered table-hover table-danger">
    <thead>
      <tr>
        <th>Name</th>
        <th>Value</th>
      </tr>
    </thead>
    <tbody id="studentTableBody">
      <!-- Data will be dynamically inserted here -->
    </tbody>
  </table>
</div>






<!-- TODO: If TR_cookie is not undefined, navbar element "logout" is visible -->




<style>
  a{
    color:bisque
  }
  a:hover{
    color:white
  }
</style>
<script>
    function trr(){
        var its=document.getElementById("its").value;
        document.cookie="its="+its;
        //THE HASHING CIPHER
        // TODO: ADD HASHING TO TR AND ITS

        // TODO: ADD ITS AND CLASSES JSON OBJECT AND LOGIC
        // TODO: Create 4 lists for each darajah, with ITS inside each list
        // TODO: If ITS is in awwala, then show awwala report
        // TODO: If ITS is in thaniya, then show thaniya report
        // TODO: If ITS is in thalesa, then show thalesa report
        // TODO: If ITS is in ruba, then show ruba report
        // if (refs[tr]==its){
        //     console.log("YES")
        //     alert("User Validated.")
        // }
        // else{
        //   alert("Incorrect")
        //   document.cookie="tr=tr; expires=Thu, 01 Jan 1970 00:00:01 GMT";
        // }
            location.reload()
    } 
</script>
<script>

// FOR REFERENCE
// for (x in data){if (data[x]["TRNO"]==27743){console.log(data[x])}}


its=getCookie("its")


</script>
<script>
  // Sample student data (replace with your data)
  students=studentsdata

  // Function to generate the table
  function generateStudentTable(student) {
    const tableBody = document.getElementById("studentTableBody");
    tableBody.innerHTML = ""; // Clear previous data

    for (const attribute in student) {
      if (typeof student[attribute] === "object") {
        for (const subject in student[attribute]) {
          const row = document.createElement("tr");
          row.innerHTML = `
            <td>${attribute} - ${subject}</td>
            <td>${student[attribute][subject]}</td>
          `;
          tableBody.appendChild(row);
        }
      } else {
        const row = document.createElement("tr");
        row.innerHTML = `
          <td>${attribute}</td>
          <td>${student[attribute]}</td>
        `;
        tableBody.appendChild(row);
      }
    }
  }

  // Example usage: Call this function when a student is selected
  // const selectedStudent = students[7]; // Replace with your logic to select a student

  // TODO REPLACE THIS LOGIC WITH ITS
  for (x in students){if (students[x]["TRNO"]==its){
    selectedStudent=students[x]
  }}
  generateStudentTable(selectedStudent);
</script>

<script>
  // document.getElementById("daim").innerHTML=scores_10[tr][0];
  // document.getElementById("percent").innerHTML=scores_10[tr][4];
  // document.getElementById("surat").innerHTML=scores_10[tr][5];

function modalDelay(){
if (getCookie("its")==undefined){
  $(document).ready(function(){
      setTimeout(function(){
          $('#myModal').modal('show');
      }, 1200);
  });}
}
</script>


<script>
  for (x in scores_1){if (scores_1[x]["TRNO"]==its){
    // document.getElementById("daim").innerHTML=scores_1[x]["English"]
    document.getElementById("daim").innerHTML="HELP"
    document.getElementById("hawashi").hidden=true;
    document.getElementById("English").hidden=true;
    // ADD ALL OTHER SUBJECT HEADERS AND SUBJECTS HERE
  }}
  </script>
</body>
</html>

<!-- 1. Collect data
2. Create 4 csvs for 4 classes (TR+Name+Div+Marks+Quran)
3. Convert CSVs into objects hardcoded into page
4. Create Main Page
(Modal to enter TR number and ITS)
(Submit button should verify ITS and TR match, then save cookie_of_TR, display success message alert, then refresh)
(Logout Button to remove cookie of TR if cookie entered)
(create table of quran, with theader and one row of data. each td should have an id assigned to it)
(use script to change each td using id by querying from selected tr data)
(do the same for marks as above) -->

<script>

</script>

